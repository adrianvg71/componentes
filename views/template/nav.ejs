<nav class="bg-[#e79a5c] border-gray-200 w-screen flex flex-row justify-center items-center z-30 fixed">
  <div class="w-[15rem] flex flex-wrap items-center justify-between mx-auto p-4">
    <a href="/home" class="text-3xl font-bold whitespace-nowrap italic text-yellow-950/80 mb-3 pl-7 first-letter:text-4xl hover:opacity-50 transition-opacity">Componentes</a>
  </div>
  <div class="w-[calc(100vw-16.5rem)] h-full flex flex-col justify-center items-end">
    <div>
      <div id="<%= user.isLoggedIn ? 'abrirDropdownCesta' : 'abrirModal' %>" class="p-4 flex flex-row justify-center items-center gap-x-1 cursor-pointer hover:opacity-50 transition-opacity">
        <svg class="text-yellow-800 w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z" />
        </svg>      
        <p class="italic text-yellow-800 font-semibold pr-6 whitespace-nowrap">MI CESTA</p>
      </div>
      <div class="cesta-dropdown-content z-10 absolute top-10 right-4 invisible opacity-0 transition-all ease-linear duration-400">
        <div class="w-0 h-0 mx-auto translate-x-[51px]
        border-l-[12px] border-l-transparent
        border-b-[15px] border-b-[#ffdec2]
        border-r-[12px] border-r-transparent">
        </div>
        <!-- Contenido dropdown cesta -->
        <div class="w-80 h-80  bg-[#ffdec2] rounded-lg  ">
          <div id="cesta-dropdown-content" class="overflow-y-auto h-[17.2rem] flex flex-col p-4 gap-2 "></div>
          <div id="finalizarCompra">

          </div>
        </div>
      </div>
    </div>
    <span class="h-[2px] bg-stone-800/40 w-full"></span>
    <div  class=" relative flex flex-row w-[calc(50vw+10rem)] justify-between items-center " id="dropdownDefaultButton" data-dropdown-toggle="dropdown">
      <div id="searchDiv" class="relative hidden">
        <input type="text" autocomplete="off" name="search" id="search" class="bg-yellow-800/60 border border-yellow-800 rounded-lg pl-2 pr-7 focus:outline-none focus:border-stone-800 py-1 w-80 text-gray-200 placeholder-gray-200/50" placeholder="Buscar...">
        <div class="absolute inset-y-0 right-0 flex items-center pr-2">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="size-5 text-gray-200">
            <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
          </svg>        
        </div>
      </div>
      <div id="<%= user.isLoggedIn ? 'abrirDropdown' : 'abrirModal' %>" class="hover:opacity-50 transition-opacity cursor-pointer p-4 flex flex-row justify-center ml-auto items-center gap-x-1">
        <svg class="text-yellow-800 w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
        </svg>
        <p class="italic text-yellow-800 font-semibold pr-6 w-max whitespace-nowrap">MI PERFIL</p>
      </div>
      <div class="perfil-dropdown-content z-10 absolute top-10 right-4 w-32 invisible opacity-0 transition-all ease-linear duration-400">
        <div class="w-0 h-0 mx-auto
        border-l-[8px] border-l-transparent
        border-b-[8px] border-b-[#ffdec2]
        border-r-[8px] border-r-transparent">
      </div>
        <ul class="text-sm text-center bg-[#ffdec2] shadow-xl divide-y-2 divide-brown-300 rounded-lg ">
          <li>
            <form action="/logout" method="post">
                <input class="py-2 cursor-pointer w-[100%] h-[100%] hover:bg-[#ffd0a6] text-black/70 font-semibold text-sm transition-colors <%= user.rol==="ADMIN" ? 'rounded-t-lg' : 'rounded-lg' %>" type="submit" value="Cerrar sesion">
            </form>
          </li>
          <% if(user.rol === 'ADMIN') { %>
            <li class="">
              <a class="block py-2 cursor-pointer w-full h-full hover:bg-[#ffd0a6] text-black/70 font-semibold text-sm transition-colors rounded-b-lg" href="/admin">Administrador</a>
            </li>
          <% } %>
        </ul>
      </div>
    </div>
  </div>
</nav>
<div class="h-28">
  <input type="hidden" id="user" value="<%= JSON.stringify(user) %>">
</div>

  <!-- Velo negro -->
  <div id="authModal" class="invisible fixed  top-0 left-0 bottom-0 right-0 bg-black/80 z-50 opacity-0 w-full h-full transition-all">

  <!-- Modal -->
  <div tabindex="-1" aria-hidden="true" class="overflow-y-auto overflow-x-hidden fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 justify-center items-center w-full max-w-md mx-auto bg-[#dfcdbe] rounded-lg shadow-2xl p-4 md:p-8">
      <!-- Modal contenido login-->
      <div id="loginModal" class="relative">
          <div class="flex items-center justify-between pb-4 mb-4 border-b border-black">
              <h3 class="text-xl font-semibold text-stone-800">
                  Iniciar sesion
              </h3>
              <button type="button" class="cerrarModal2 text-stone-900 bg-transparent transition-colors hover:bg-stone-800 hover:text-white rounded-lg size-8 ms-auto inline-flex justify-center items-center" data-modal-hide="authentication-modal">
                  <svg class="size-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                      <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                  </svg>
                  <span class="sr-only">Close modal</span>
              </button>
          </div>
          <!-- Modal body -->
          <div class="p-4 md:p-5">
              <form id="loginForm" class="space-y-4">
                  <div>
                      <label for="emailR" class="block mb-2 text-sm font-medium text-gray-900 ">Correo</label>
                      <input type="email" name="email" id="emailR" class="bg-gray-200 border border-black/50 text-black text-sm rounded-lg focus:ring-black focus:border-black block w-full p-2.5 focus:outline-none" placeholder="correo@gmail.com" required >
                  </div>
                  <div>
                      <label for="passwordR" class="block mb-2 text-sm font-medium text-gray-900 ">Contraseña</label>
                      <div class="relative">
                        <input type="password" name="password" id="passwordR" placeholder="••••••••" class="bg-gray-200 border border-black/50 text-black text-sm rounded-lg focus:ring-black focus:border-black block w-full p-2.5 focus:outline-none" required />
                        <div class="absolute inset-y-0 right-0 flex items-center pr-2">
                          <div id="ojo" class="w-fit rounded-full p-1 hover:bg-opacity-50 hover:bg-gray-400 transition-colors">
                            <svg id="text" class="size-6 cursor-pointer" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M4 12C4 12 5.6 7 12 7M12 7C18.4 7 20 12 20 12M12 7V4M18 5L16 7.5M6 5L8 7.5M15 13C15 14.6569 13.6569 16 12 16C10.3431 16 9 14.6569 9 13C9 11.3431 10.3431 10 12 10C13.6569 10 15 11.3431 15 13Z" stroke="#9ca3af" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
                          </div>
                        </div>                        
                      </div>
                  </div>
                  <div class="text-center text-red-600 font-semibold">
                  </div>
                  <button type="submit" class="w-full text-white bg-orange-500 hover:bg-orange-600 focus:ring-1 focus:outline-none focus:ring-orange-950/50 font-semibold rounded-lg text-base px-5 py-2.5 text-center ">Iniciar sesion</button>
                  <div class="text-sm font-medium text-gray-900 ">
                      ¿No tienes cuenta? <a id="cambiar" class="text-orange-700 cursor-pointer hover:underline">Crear cuenta</a>
                  </div>
              </form>
          </div>
      </div>
      
       <!-- Modal contenido register-->
       <div id="registerModal" class="hidden relative">
        <div class="flex items-center justify-between pb-4 mb-4 border-b border-black">
            <h3 class="text-xl font-semibold text-stone-800">
                Registrarse
            </h3>
            <button type="button" class="cerrarModal text-stone-900 bg-transparent transition-colors hover:bg-stone-800 hover:text-white rounded-lg size-8 ms-auto inline-flex justify-center items-center" data-modal-hide="authentication-modal">
                <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                </svg>
                <span class="sr-only">Close modal</span>
            </button>
        </div>
        <!-- Modal body -->
        <div class="p-4 md:p-5">
            <form id="registerForm" class="space-y-4">
                <div>
                    <label for="email" class="block mb-2 text-sm font-medium text-gray-900 ">Correo</label>
                    <input type="email" name="email" id="email" class="bg-gray-200 border border-black/50 text-black text-sm rounded-lg focus:ring-black focus:border-black block w-full p-2.5 focus:outline-none" placeholder="correo@gmail.com" required />
                </div>
                <div>
                  <label for="username" class="block mb-2 text-sm font-medium text-gray-900 ">Usuario</label>
                  <input type="text" maxlength="12" name="username" id="username" class="bg-gray-200 border border-black/50 text-black text-sm rounded-lg focus:ring-black focus:border-black block w-full p-2.5 focus:outline-none" placeholder="usuario" required />
                </div>
                <div>
                    <label for="password" class="block mb-2 text-sm font-medium text-gray-900 ">Contraseña</label>
                    <div class="relative">
                      <input type="password" name="password" id="password" placeholder="••••••••" class="bg-gray-200 border border-black/50 text-black text-sm rounded-lg focus:ring-black focus:border-black block w-full p-2.5 focus:outline-none" required />
                      <div class="absolute inset-y-0 right-0 flex items-center pr-2">
                        <div id="ojo" class="w-fit rounded-full p-1 hover:bg-opacity-50 hover:bg-gray-400 transition-colors">
                          <svg id="text" class="size-6 cursor-pointer" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M4 12C4 12 5.6 7 12 7M12 7C18.4 7 20 12 20 12M12 7V4M18 5L16 7.5M6 5L8 7.5M15 13C15 14.6569 13.6569 16 12 16C10.3431 16 9 14.6569 9 13C9 11.3431 10.3431 10 12 10C13.6569 10 15 11.3431 15 13Z" stroke="#9ca3af" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
                        </div>
                      </div>                        
                    </div>
                </div>
                <div class="text-center text-red-600 font-semibold">
                </div>
                <button type="submit" class="w-full text-white bg-orange-500 hover:bg-orange-600 focus:ring-1 focus:outline-none focus:ring-orange-950/50 font-semibold rounded-lg text-base px-5 py-2.5 text-center ">Registrarse</button>
                <div class="text-sm font-medium text-gray-900 ">
                    ¿Ya tienes cuenta? <a id="cambiar" class="text-orange-700 cursor-pointer hover:underline">Iniciar sesion</a>
                </div>
            </form>
        </div>
    </div>
    </div>
</div>
